{"version":3,"sources":["pages/mine/children/changepwd/ChangePwd.js","components/Task/Task.js"],"names":["ipts","id","tips","ChangePwd","props","state","infoList","task","className","map","item","key","type","placeholder","onChange","iptValAction","bind","onClick","this","yesPwdAction","ev","persist","setState","phone","target","value","pwd","newPwd","repPwd","pInfo","sInfo","hideAction","setTimeout","changePwdAction","history","push","changeHasbackAction","changeTitle","Component","connect","hasBack","header","title","mine","dispatch","val","Task"],"mappings":"6NAKMA,EAAO,CACX,CAACC,GAAG,EAAEC,KAAK,4BACX,CAACD,GAAG,EAAEC,KAAK,wCACX,CAACD,GAAG,EAAEC,KAAK,wCACX,CAACD,GAAG,EAAEC,KAAK,+CAGPC,E,YACJ,WAAYC,GAAO,IAAD,8BAChB,4CAAMA,KACDC,MAAQ,CACXC,SAASF,EAAME,SACfC,MAAK,EACLL,KAAK,IALS,E,sEAQR,IAAD,OACP,OACE,yBAAKM,UAAU,gBACb,yBAAKA,UAAU,QAEbR,EAAKS,KAAI,SAAAC,GAAI,OACX,2BAAOC,IAAKD,EAAKT,GAAIW,KAAkB,IAAZF,EAAKT,GAAW,OAAS,WAAYY,YAAaH,EAAKR,KAAMY,SAAU,EAAKC,aAAaC,KAAK,EAAKN,EAAKT,UAIvI,yBAAKO,UAAU,SACb,uBAAGS,QAASC,KAAKC,aAAaH,KAAKE,OAAnC,6BAGDA,KAAKb,MAAME,MAAQ,kBAAC,IAAD,CAAML,KAAMgB,KAAKb,MAAMH,U,mCAKpCD,EAAGmB,GAAI,IAAD,OAEjB,OADAA,EAAGC,UACKpB,GACN,KAAK,EACH,OACEiB,KAAKI,UAAS,iBAAK,CACjBhB,SAAS,eACJ,EAAKD,MAAMC,SADR,CAENiB,MAAMH,EAAGI,OAAOC,YAIxB,KAAK,EACH,OACEP,KAAKI,UAAS,iBAAK,CACjBhB,SAAS,eACJ,EAAKD,MAAMC,SADR,CAENoB,IAAIN,EAAGI,OAAOC,YAItB,KAAK,EACH,OACEP,KAAKI,UAAS,iBAAK,CACjBhB,SAAS,eACJ,EAAKD,MAAMC,SADR,CAENqB,OAAOP,EAAGI,OAAOC,YAIzB,KAAK,EACH,OACEP,KAAKI,UAAS,iBAAK,CACjBhB,SAAS,eACJ,EAAKD,MAAMC,SADR,CAENsB,OAAOR,EAAGI,OAAOC,e,qCASd,IAAD,OACRI,EAAQX,KAAKd,MAAME,SACnBwB,EAAQZ,KAAKb,MAAMC,SACpBuB,EAAMN,QAAUO,EAAMP,MAItBM,EAAMH,MAAQI,EAAMJ,IAIlBI,EAAMH,QAAUG,EAAMF,QAAYE,EAAMH,SAAWG,EAAMF,QAI9DV,KAAKa,WAAW,4BAChBC,YAAW,WACT,EAAK5B,MAAM6B,gBAAgBH,EAAMH,QACjC,EAAKvB,MAAM8B,QAAQC,KAAK,WACvB,MAPDjB,KAAKa,WAAW,8CAJhBb,KAAKa,WAAW,4BAJjBb,KAAKa,WAAW,0C,iCAiBR7B,GAAM,IAAD,OACdgB,KAAKI,UAAS,iBAAK,CACjBf,MAAK,EACLL,WAEF8B,YAAW,WACT,EAAKV,UAAS,iBAAK,CACjBf,MAAK,QAEN,O,0CAGHW,KAAKd,MAAMgC,sBACXlB,KAAKd,MAAMiC,kB,GA1GSC,aA0ITC,uBA3BS,SAAClC,GAAD,MAAU,CAChCmC,QAAQnC,EAAMoC,OAAOD,QACrBE,MAAMrC,EAAMoC,OAAOC,MACnBpC,SAASD,EAAMsC,KAAKrC,aAGK,SAACsC,GAAD,MAAa,CACtCX,gBADsC,SACtBY,GACdD,EAAS,CACPhC,KAAK,YACLa,MAAMoB,KAGVT,oBAPsC,WAQpCQ,EAAS,CACPhC,KAAK,gBACL4B,SAAQ,KAGZH,YAbsC,WAcpCO,EAAS,CACPhC,KAAK,cACL8B,MAAM,iCAKGH,CAA4CpC,I,gCCtJ3D,0BAOe2C,IAJH,SAAC1C,GAAD,OACV,0BAAMI,UAAU,QAAQJ,EAAMF,Q","file":"static/js/9.22deb8ce.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './style.scss'\r\nimport {connect} from 'react-redux'\r\nimport Task from '../../../../components/Task/Task'\r\n\r\nconst ipts = [\r\n  {id:1,tips:'手机号码'},\r\n  {id:2,tips:'请输入旧密码'},\r\n  {id:3,tips:'请输入新密码'},\r\n  {id:4,tips:'请输入确认密码'},\r\n]\r\n\r\nclass ChangePwd extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      infoList:props.infoList,\r\n      task:false,\r\n      tips:''\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"page subpage\">\r\n        <div className=\"inps\">\r\n        {\r\n          ipts.map(item=>(\r\n            <input key={item.id} type={item.id === 1 ? 'text' : 'password'} placeholder={item.tips} onChange={this.iptValAction.bind(this,item.id)}/>\r\n          ))\r\n        }\r\n        </div>\r\n        <div className=\"c_btn\">\r\n          <p onClick={this.yesPwdAction.bind(this)}>确认修改</p>\r\n        </div>\r\n\r\n        {this.state.task && <Task tips={this.state.tips}/>}\r\n        \r\n      </div>\r\n    )\r\n  }\r\n  iptValAction(id,ev){\r\n    ev.persist();\r\n    switch (id) {\r\n      case 1:\r\n        return  (\r\n          this.setState(()=>({\r\n            infoList:{\r\n              ...this.state.infoList,\r\n              phone:ev.target.value\r\n            }\r\n          }))\r\n        )\r\n      case 2:\r\n        return  (\r\n          this.setState(()=>({\r\n            infoList:{\r\n              ...this.state.infoList,\r\n              pwd:ev.target.value\r\n            }\r\n          }))\r\n        )\r\n      case 3:\r\n        return  (\r\n          this.setState(()=>({\r\n            infoList:{\r\n              ...this.state.infoList,\r\n              newPwd:ev.target.value\r\n            }\r\n          }))\r\n        )\r\n      case 4:\r\n        return  (\r\n          this.setState(()=>({\r\n            infoList:{\r\n              ...this.state.infoList,\r\n              repPwd:ev.target.value\r\n            }\r\n          }))\r\n        )\r\n    \r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  yesPwdAction(){\r\n    let pInfo = this.props.infoList\r\n    let sInfo = this.state.infoList\r\n    if(pInfo.phone !== sInfo.phone){\r\n     this.hideAction('手机号码错误')\r\n      return\r\n    }\r\n    if(pInfo.pwd !== sInfo.pwd){\r\n      this.hideAction('密码错误')\r\n      return\r\n    }\r\n    if(!(sInfo.newPwd && sInfo.repPwd) || (sInfo.newPwd !== sInfo.repPwd) ){ \r\n      this.hideAction('两次密码不一致')\r\n      return\r\n    }\r\n    this.hideAction('修改成功')\r\n    setTimeout(() => {\r\n      this.props.changePwdAction(sInfo.newPwd)\r\n      this.props.history.push('/mine')\r\n    }, 1000);\r\n  }\r\n  hideAction(tips){\r\n    this.setState(()=>({\r\n      task:true,\r\n      tips\r\n    }))\r\n    setTimeout(() => {\r\n      this.setState(()=>({\r\n        task:false,\r\n      }))\r\n    }, 1000);\r\n  }\r\n  componentDidMount(){\r\n    this.props.changeHasbackAction();\r\n    this.props.changeTitle();\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state)=>({\r\n  hasBack:state.header.hasBack,\r\n  title:state.header.title,\r\n  infoList:state.mine.infoList\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch)=>({\r\n  changePwdAction(val){\r\n    dispatch({\r\n      type:'changePwd',\r\n      value:val\r\n    })\r\n  },\r\n  changeHasbackAction(){\r\n    dispatch({\r\n      type:'changeHasBack',\r\n      hasBack:true,\r\n    })\r\n  },\r\n  changeTitle(){\r\n    dispatch({\r\n      type:'changeTitle',\r\n      title:'修改密码'\r\n    })\r\n  }\r\n})\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(ChangePwd)\r\n","import React from 'react'\r\nimport './style.scss'\r\n\r\nconst Task =(props)=>(\r\n  <span className=\"task\">{props.tips}</span>\r\n)\r\n\r\nexport default Task"],"sourceRoot":""}