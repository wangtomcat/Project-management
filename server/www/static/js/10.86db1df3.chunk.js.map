{"version":3,"sources":["pages/pro/children/proDetail/ProDetail.js","components/Task/Task.js"],"names":["ProDetail","state","task","tips","list","this","className","src","proImg","alt","id","proSimpName","proFullName","proAddress","proKehu","status","proFuxze","proTeam","onClick","changeList","bind","val","setState","setTimeout","ev","aId","Number","props","match","params","target","value","changeStatus","taskAction","history","push","proList","filter","item","changeHasbackAction","changeTitle","Component","connect","hasBack","header","title","pro","dispatch","type","Task"],"mappings":"uNAKMA,E,YACJ,aAAc,IAAD,8BACX,+CACKC,MAAM,CACTC,MAAK,EACLC,KAAK,GACLC,KAAK,IALI,E,sEAWH,IACDA,EAAQC,KAAKJ,MAAbG,KAEP,OACE,yBAAKE,UAAU,gBACd,yBAAKA,UAAU,UACb,yBAAKC,IAAKH,EAAKI,OAAQC,IAAI,KAC3B,yBAAKH,UAAU,YACf,8BAAOF,EAAKM,IACZ,8BAAON,EAAKO,eAGb,yBAAKL,UAAU,UACb,sDAAO,8BAAOF,EAAKQ,cACnB,4DAAQ,8BAAOR,EAAKS,aACpB,sDAAO,8BAAOT,EAAKU,WAErB,yBAAKR,UAAU,UACf,sDAAO,8BACc,YAAdF,EAAKW,OACC,qBAEQ,aAAdX,EAAKW,OACC,qBAEQ,UAAdX,EAAKW,OACC,0BADT,IAIF,4DAAQ,8BAAOX,EAAKY,WACpB,sDAAO,8BAAOZ,EAAKa,WAGJ,YAAhBb,EAAKW,QAAwB,yBAAKT,UAAU,aAC3C,0BAAMI,GAAG,IAAIQ,QAASb,KAAKc,WAAWC,KAAKf,OAA3C,4BACA,0BAAMK,GAAG,IAAIQ,QAASb,KAAKc,WAAWC,KAAKf,OAA3C,6BAEDA,KAAKJ,MAAMC,MAAQ,kBAAC,IAAD,CAAMC,KAAME,KAAKJ,MAAME,U,iCAItCkB,GAAK,IAAD,OACbhB,KAAKiB,UAAS,iBAAK,CACjBpB,MAAK,EACLC,KAAKkB,MAEPE,YAAW,WACT,EAAKD,UAAS,iBAAK,CACjBpB,MAAK,EACLC,KAAK,SAEN,O,iCAEMqB,GAAI,IAAD,OAERC,EAAMC,OAAOrB,KAAKsB,MAAMC,MAAMC,OAAOnB,IACrCA,EAAKgB,OAAOF,EAAGM,OAAOpB,IACtBqB,EAAQ,GACF,IAAPrB,IACDqB,EAAMrB,GAAKe,EACXM,EAAMhB,OAAS,QACfV,KAAKsB,MAAMK,aAAaD,GACxB1B,KAAK4B,WAAW,4BAChBV,YAAW,WACT,EAAKI,MAAMO,QAAQC,KAAK,UACvB,MAEK,IAAPzB,IACDqB,EAAMrB,GAAKe,EACXM,EAAMhB,OAAS,WACfV,KAAKsB,MAAMK,aAAaD,GACxB1B,KAAK4B,WAAW,4BAChBV,YAAW,WACT,EAAKI,MAAMO,QAAQC,KAAK,UACvB,Q,0CAKL,IAAIzB,EAAKgB,OAAOrB,KAAKsB,MAAMC,MAAMC,OAAOnB,IACpCN,EAAOC,KAAKsB,MAAMS,QAAQC,QAAO,SAAAC,GAAI,OAAGA,EAAK5B,KAAOA,KAAK,GAC7DL,KAAKiB,UAAS,iBAAK,CACjBlB,WAEFC,KAAKsB,MAAMY,sBACXlC,KAAKsB,MAAMa,kB,GAjGSC,aAkITC,uBA3BS,SAACzC,GAAD,MAAU,CAChC0C,QAAQ1C,EAAM2C,OAAOD,QACrBE,MAAM5C,EAAM2C,OAAOC,MACnBT,QAAQnC,EAAM6C,IAAIV,YAGO,SAACW,GAAD,MAAa,CACtCf,aADsC,SACzBD,GACXgB,EAAS,CACPC,KAAK,eACLjB,WAGJQ,oBAPsC,WAQpCQ,EAAS,CACPC,KAAK,gBACLL,SAAQ,KAGZH,YAbsC,WAcpCO,EAAS,CACPC,KAAK,cACLH,MAAM,iCAKGH,CAA4C1C,I,gCCvI3D,0BAOeiD,IAJH,SAACtB,GAAD,OACV,0BAAMrB,UAAU,QAAQqB,EAAMxB,Q","file":"static/js/10.86db1df3.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './style.scss'\r\nimport {connect} from 'react-redux'\r\nimport Task from '../../../../components/Task/Task'\r\n\r\nclass ProDetail extends Component {\r\n  constructor(){\r\n    super()\r\n    this.state={\r\n      task:false,\r\n      tips:'',\r\n      list:{}\r\n    }\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const {list} = this.state\r\n    // console.log(list)\r\n    return (\r\n      <div className=\"page subpage\">\r\n       <div className=\"pp_img\">\r\n         <img src={list.proImg} alt=\"\"/>\r\n         <div className=\"pp_title\">\r\n         <span>{list.id}</span>\r\n         <span>{list.proSimpName}</span>\r\n         </div>\r\n       </div>\r\n        <div className=\"pp_top\">\r\n          <p>项目全称<span>{list.proFullName}</span></p>\r\n          <p>项目所在地<span>{list.proAddress}</span></p>\r\n          <p>客户名称<span>{list.proKehu}</span></p>\r\n        </div>\r\n        <div className=\"pp_top\">\r\n        <p>项目状态<span>{(()=>{\r\n            if(list.status==='pending'){\r\n              return '进行中'\r\n            }\r\n            if(list.status==='finished'){\r\n              return '已完成'\r\n            }\r\n            if(list.status==='close'){\r\n              return '已关闭'\r\n            }\r\n          })()}</span></p>\r\n          <p>项目负责人<span>{list.proFuxze}</span></p>\r\n          <p>项目成员<span>{list.proTeam}</span></p>\r\n        </div>\r\n\r\n        {list.status === 'pending' && <div className=\"pp_bottom\">\r\n          <span id=\"1\" onClick={this.changeList.bind(this)}>关闭项目</span>\r\n          <span id=\"2\" onClick={this.changeList.bind(this)}>完成项目</span>\r\n        </div>}\r\n        {this.state.task && <Task tips={this.state.tips}/>}\r\n      </div>\r\n    )\r\n  }\r\n  taskAction(val){\r\n    this.setState(()=>({\r\n      task:true,\r\n      tips:val\r\n    }))\r\n    setTimeout(() => {\r\n      this.setState(()=>({\r\n        task:false,\r\n        tips:''\r\n      }))\r\n    }, 1000);\r\n  }\r\n  changeList(ev){\r\n    // console.log(ev.target.id)\r\n    let aId = Number(this.props.match.params.id)\r\n    let id = Number(ev.target.id)\r\n    let value = {}\r\n    if(id === 1){\r\n      value.id = aId;\r\n      value.status = 'close'\r\n      this.props.changeStatus(value);\r\n      this.taskAction('关闭成功')\r\n      setTimeout(() => {\r\n        this.props.history.push('/pro')\r\n      }, 1000);\r\n    }\r\n    if(id === 2){\r\n      value.id = aId;\r\n      value.status = 'finished'\r\n      this.props.changeStatus(value);\r\n      this.taskAction('完成成功')\r\n      setTimeout(() => {\r\n        this.props.history.push('/pro')\r\n      }, 1000);\r\n    }\r\n  }\r\n  componentDidMount(){\r\n    // console.log(this.props.match.params.id)\r\n    let id = Number(this.props.match.params.id)\r\n    let list = this.props.proList.filter(item=>(item.id === id))[0]\r\n    this.setState(()=>({\r\n      list\r\n    }))\r\n    this.props.changeHasbackAction();\r\n    this.props.changeTitle();\r\n  }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state)=>({\r\n  hasBack:state.header.hasBack,\r\n  title:state.header.title,\r\n  proList:state.pro.proList\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch)=>({\r\n  changeStatus(value){\r\n    dispatch({\r\n      type:'changeStatus',\r\n      value,\r\n    })\r\n  },\r\n  changeHasbackAction(){\r\n    dispatch({\r\n      type:'changeHasBack',\r\n      hasBack:true,\r\n    })\r\n  },\r\n  changeTitle(){\r\n    dispatch({\r\n      type:'changeTitle',\r\n      title:'项目详情'\r\n    })\r\n  }\r\n})\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(ProDetail)\r\n","import React from 'react'\r\nimport './style.scss'\r\n\r\nconst Task =(props)=>(\r\n  <span className=\"task\">{props.tips}</span>\r\n)\r\n\r\nexport default Task"],"sourceRoot":""}