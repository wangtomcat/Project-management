{"version":3,"sources":["pages/login/Login.js","components/Task/Task.js"],"names":["Login","state","taskFlag","taskTips","flag","tips","number","show","code","login","phone","pwd","re_login","newPwd","rePwd","className","src","alt","this","onChange","changeVla","bind","id","type","placeholder","onClick","loginAction","changeShow","value","getCodeAction","val","setState","setTimeout","Math","floor","random","timer","setInterval","clearInterval","ev","persist","infoList","props","target","taskAction","history","push","changePwd","changeHasbackAction","changeTitle","Component","connect","hasBack","header","title","mine","dispatch","Task"],"mappings":"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","file":"static/js/8.79e79c75.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport './style.scss'\r\nimport {connect} from 'react-redux'\r\nimport Task from '../../components/Task/Task'\r\n\r\nclass Login extends Component {\r\n  constructor(){\r\n    super()\r\n    this.state={\r\n      taskFlag:false,\r\n      taskTips:'',\r\n      flag:true,\r\n      tips:'获取验证码',\r\n      number:10,\r\n      show:true,\r\n      code:null,\r\n      login:{\r\n        phone:null,\r\n        pwd:null\r\n      },\r\n      re_login:{\r\n        phone:null,\r\n        newPwd:null,\r\n        code:'',\r\n        rePwd:null\r\n      }\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"page subpage login\">\r\n        <div className=\"l_login\">\r\n          <img src=\"/img/login.jpg\" alt=\"\"/>\r\n          <p className=\"l_pupo\">欢迎您来到汤姆猫项目管理平台</p>\r\n          {this.state.show ? <div className=\"l_ipt\">\r\n            <input onChange={this.changeVla.bind(this)} id='1' type=\"text\" placeholder=\"请输入手机号\"/>\r\n            <input onChange={this.changeVla.bind(this)} id='2' type=\"password\" placeholder=\"请输入密码\"/>\r\n            <span id=\"login\" onClick={this.loginAction.bind(this)}>登录</span>\r\n            <b onClick={this.changeShow.bind(this)}>忘记密码?</b>\r\n          </div>\r\n          :<div className=\"l_repwd\">\r\n            <input onChange={this.changeVla.bind(this)} id='3' type=\"text\" placeholder=\"请输入手机号\"/>\r\n            <p><input value={this.state.re_login.code} onChange={this.changeVla.bind(this)} id='4' type=\"text\" placeholder=\"验证码\"/> <i className=\"l_code\" onClick={this.getCodeAction.bind(this)}>{this.state.flag? this.state.tips :this.state.number+'s'}</i></p>\r\n            <input onChange={this.changeVla.bind(this)} id='5' type=\"password\" placeholder=\"请输入新的密码\"/>\r\n            <input onChange={this.changeVla.bind(this)} id='6' type=\"password\" placeholder=\"请确认密码\"/>\r\n            <span id=\"re_login\" className=\"re_login\" onClick={this.loginAction.bind(this)} >登录</span>\r\n            <b className=\"l_remeb\" onClick={this.changeShow.bind(this)}  >想起密码了? 去登录！</b>\r\n          </div>}\r\n        </div>\r\n        {this.state.taskFlag && <Task tips={this.state.taskTips}/>}\r\n      </div>\r\n    )\r\n  }\r\n  taskAction(val){\r\n    this.setState(()=>({\r\n      taskFlag:true,\r\n      taskTips:val\r\n    }))\r\n    setTimeout(() => {\r\n      this.setState(()=>({\r\n        taskFlag:false,\r\n        taskTips:''\r\n      }))\r\n    }, 1000);\r\n  }\r\n  getCodeAction(){\r\n    if(this.state.number === 10){\r\n      let code = Math.floor(Math.random()*1000000)\r\n      // console.log(code);\r\n      this.setState(()=>({\r\n        code,\r\n        flag:false\r\n      }))\r\n      this.timer = setInterval(()=>{\r\n        this.setState(()=>({\r\n          number:(this.state.number)-1\r\n        }))\r\n        if(this.state.number === 0){\r\n          clearInterval(this.timer);\r\n          this.setState(()=>({\r\n            flag:true,\r\n            number:10\r\n          }))\r\n        }\r\n      },1000)\r\n      setTimeout(() => {\r\n        this.setState(()=>({\r\n          re_login:{\r\n            ...this.state.re_login,\r\n            code\r\n          }\r\n        }))\r\n      }, 1500);\r\n    }else{\r\n      return\r\n    }\r\n\r\n\r\n\r\n  }\r\n  loginAction(ev){\r\n    ev.persist();\r\n    let login = this.state.login;\r\n    let re_login = this.state.re_login;\r\n    let infoList = this.props.infoList;\r\n    // console.log(ev.target.id)\r\n    // console.log(this.props.infoList)\r\n    // console.log(this.state.login,this.state.re_login)\r\n    if(ev.target.id === 'login'){\r\n      if((login.phone === infoList.phone) && (login.pwd === infoList.pwd)){\r\n        this.taskAction('登录成功');\r\n        setTimeout(() => {\r\n          this.props.history.push('/home')\r\n        }, 1000);\r\n      }\r\n      else{\r\n        this.taskAction('账号或密码错误');\r\n      }\r\n    }else{\r\n      if((re_login.phone === infoList.phone) && (re_login.rePwd === re_login.newPwd) && (re_login.code)){\r\n        this.taskAction('登录成功');\r\n        setTimeout(() => {\r\n          this.props.history.push('/home')\r\n          // console.log(this.props.infoList)\r\n        }, 1000);\r\n        this.props.changePwd(re_login.newPwd)\r\n      }else{\r\n        this.taskAction('账号或密码错误');\r\n      }\r\n    }\r\n  }\r\n  changeVla(ev){\r\n    ev.persist();\r\n    // console.log(ev.target.id)\r\n    switch (ev.target.id) {\r\n      case '1':\r\n        return this.setState(()=>({\r\n          login:{\r\n            ...this.state.login,\r\n            phone:ev.target.value\r\n          }\r\n        }))\r\n      case '2':\r\n        return this.setState(()=>({\r\n          login:{\r\n            ...this.state.login,\r\n            pwd:ev.target.value\r\n          }\r\n        }))\r\n      case '3':\r\n        return this.setState(()=>({\r\n          re_login:{\r\n            ...this.state.re_login,\r\n            phone:ev.target.value\r\n          }\r\n        }))\r\n      case '4':\r\n        return \r\n      case '5':\r\n        return this.setState(()=>({\r\n          re_login:{\r\n            ...this.state.re_login,\r\n            newPwd:ev.target.value\r\n          }\r\n        }))\r\n      case '6':\r\n        return this.setState(()=>({\r\n          re_login:{\r\n            ...this.state.re_login,\r\n            rePwd:ev.target.value\r\n          }\r\n        }))\r\n    \r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  changeShow(){\r\n    this.setState(()=>({\r\n      show:!this.state.show\r\n    }))\r\n  }\r\n  componentDidMount(){\r\n    this.props.changeHasbackAction();\r\n    this.props.changeTitle();\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state)=>({\r\n  hasBack:state.header.hasBack,\r\n  title:state.header.title,\r\n  infoList:state.mine.infoList\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch)=>({\r\n  changePwd(val){\r\n    dispatch({\r\n      type:'changePwd',\r\n      value:val\r\n    })\r\n  },\r\n  changeHasbackAction(){\r\n    dispatch({\r\n      type:'changeHasBack',\r\n      hasBack:false,\r\n    })\r\n  },\r\n  changeTitle(){\r\n    dispatch({\r\n      type:'changeTitle',\r\n      title:'登录'\r\n    })\r\n  }\r\n})\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Login)","import React from 'react'\r\nimport './style.scss'\r\n\r\nconst Task =(props)=>(\r\n  <span className=\"task\">{props.tips}</span>\r\n)\r\n\r\nexport default Task"],"sourceRoot":""}