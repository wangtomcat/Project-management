{"version":3,"sources":["util/countTime.js","pages/message/children/dealPro/DealPro.js","components/Task/Task.js"],"names":["countTime","date","d","Date","M","getMinutes","getHours","getMonth","getDate","DealPro","state","task","tips","id","this","props","match","params","Number","pro","proList","filter","item","className","proSimpName","proFuxze","src","proImg","alt","proFullName","status","onClick","changeTodoAction","bind","value","changeStatus","setState","setTimeout","history","push","changeHasbackAction","changeTitle","Component","connect","hasBack","header","title","dispatch","type","Task"],"mappings":"oGAgBeA,IAhBG,SAACC,GACjB,IAAIC,EAAI,IAAIC,KAGRC,EAAK,IAAID,KAAKF,GAAMI,aAAa,GAAK,IAAI,IAAIF,KAAKF,GAAMI,aAAc,IAAIF,KAAKF,GAAMI,aAC1F,OAAIH,EAAED,EAHO,MAIJ,eAAO,IAAIE,KAAKF,GAAMK,WAAW,IAAIF,EAE1CF,EAAED,EANO,OAMUC,EAAED,EALZ,OAMJ,eAAO,IAAIE,KAAKF,GAAMK,WAAW,IAAIF,EAE1CF,EAAED,EARO,OASH,IAAIE,KAAKF,GAAMM,WAAW,EAAI,SAAI,IAAIJ,KAAKF,GAAMO,UAAU,cADrE,I,4JCLIC,E,YACJ,aAAc,IAAD,8BACX,+CACKC,MAAM,CACTC,MAAK,EACLC,KAAK,IAJI,E,sEAOH,IACHC,EAAMC,KAAKC,MAAMC,MAAMC,OAAvBJ,GAELA,EAAKK,OAAOL,GACZ,IACMM,EADKL,KAAKC,MAAMK,QAAQC,QAAO,SAAAC,GAAI,OAAGA,EAAKT,KAAOA,KACvC,GAEjB,OACE,yBAAKU,UAAU,gBACb,yBAAKA,UAAU,UACb,uBAAGA,UAAU,YACVJ,EAAIK,YACL,0BAAMD,UAAU,UAAhB,uBAA+BJ,EAAIM,UACnC,yBAAKC,IAAKP,EAAIQ,OAAQC,IAAI,MAE5B,uBAAGL,UAAU,SACX,8BAAOJ,EAAIU,aACX,8BAAO7B,YAAUmB,EAAIlB,QAEvB,uBAAGsB,UAAU,aACVJ,EAAIU,YAA4B,aAAdV,EAAIW,OAAuB,iCAAU,iCAD1D,IAEkB,aAAdX,EAAIW,QAAwB,sGAGpB,aAAdX,EAAIW,QAAwB,yBAAKP,UAAU,UAAUQ,QAASjB,KAAKkB,iBAAiBC,KAAKnB,KAAKK,EAAIN,KAAtE,gBAG3BC,KAAKJ,MAAMC,MAAQ,kBAAC,IAAD,CAAMC,KAAME,KAAKJ,MAAME,U,uCAIhCC,GAAI,IAAD,OAEdqB,EAAQ,CACVrB,KACAiB,OAAO,WAEThB,KAAKC,MAAMoB,aAAaD,GACxBpB,KAAKsB,UAAS,iBAAK,CACjBzB,MAAK,EACLC,KAAK,+BAEPyB,YAAW,WACT,EAAKD,UAAS,iBAAK,CACjBzB,MAAK,EACLC,KAAK,OAEP,EAAKG,MAAMuB,QAAQC,KAAK,cACvB,O,0CAIHzB,KAAKC,MAAMyB,sBACX1B,KAAKC,MAAM0B,kB,GA7DOC,aA6FPC,uBA3BS,SAACjC,GAAD,MAAU,CAChCkC,QAAQlC,EAAMmC,OAAOD,QACrBE,MAAMpC,EAAMmC,OAAOC,MACnB1B,QAAQV,EAAMS,IAAIC,YAGO,SAAC2B,GAAD,MAAa,CACtCZ,aADsC,SACzBD,GACXa,EAAS,CACPC,KAAK,eACLd,WAGJM,oBAPsC,WAQpCO,EAAS,CACPC,KAAK,gBACLJ,SAAQ,KAGZH,YAbsC,WAcpCM,EAAS,CACPC,KAAK,cACLF,MAAM,iCAKGH,CAA4ClC,I,gCCnG3D,0BAOewC,IAJH,SAAClC,GAAD,OACV,0BAAMQ,UAAU,QAAQR,EAAMH,Q","file":"static/js/7.04624bfd.chunk.js","sourcesContent":["const countTime = (date)=>{\r\n  let d = new Date();\r\n  let OneDay = 24*60*60*1000\r\n  let TwoDay = 24*60*60*1000*2\r\n  let M = (new Date(date).getMinutes()<10 ? '0'+new Date(date).getMinutes() :new Date(date).getMinutes())\r\n  if((d-date)<OneDay){\r\n    return '今天' + new Date(date).getHours()+':'+M\r\n  }\r\n  if((d-date)>OneDay && (d-date)<TwoDay){\r\n    return '昨天' + new Date(date).getHours()+':'+M\r\n  }\r\n  if((d-date)>TwoDay){\r\n    return (new Date(date).getMonth()+1) +'月'+new Date(date).getDate()+'日'\r\n  }\r\n}\r\n\r\nexport default countTime","import React, { Component } from 'react'\r\nimport './style.scss'\r\nimport {connect} from 'react-redux'\r\nimport countTime from '../../../../util/countTime';\r\nimport Task from '../../../../components/Task/Task'\r\n\r\nclass DealPro extends Component {\r\n  constructor(){\r\n    super()\r\n    this.state={\r\n      task:false,\r\n      tips:''\r\n    }\r\n  }\r\n  render() {\r\n    let {id} = this.props.match.params;\r\n    // console.log(id)\r\n    id = Number(id)\r\n    let temp = this.props.proList.filter(item=>(item.id === id))\r\n    const pro = temp[0]\r\n    // console.log(pro)\r\n    return (\r\n      <div className=\"page subpage\">\r\n        <div className=\"d_main\">\r\n          <p className=\"d_header\">\r\n            {pro.proSimpName}\r\n            <span className=\"d_name\">负责人: {pro.proFuxze}</span>\r\n            <img src={pro.proImg} alt=\"\"/>\r\n          </p>\r\n          <p className=\"d_pro\">\r\n            <span>{pro.proFullName}</span>\r\n            <span>{countTime(pro.date)}</span>\r\n          </p>\r\n          <p className=\"d_content\">\r\n            {pro.proFullName}{ pro.status !=='finished' ? '以创建成功' : '项目已完成'},\r\n            { pro.status !=='finished' && <span>请点下下面按钮启动项目</span>}\r\n          </p>\r\n        </div>\r\n      { pro.status !=='finished' && <div className=\"d_start\" onClick={this.changeTodoAction.bind(this,pro.id)}>\r\n          启动\r\n        </div>}\r\n        {this.state.task && <Task tips={this.state.tips}/>}\r\n      </div>\r\n    )\r\n  }\r\n  changeTodoAction(id){\r\n    // console.log(id)\r\n    let value = {\r\n      id,\r\n      status:'pending'\r\n    }\r\n    this.props.changeStatus(value);\r\n    this.setState(()=>({\r\n      task:true,\r\n      tips:'启动成功'\r\n    }))\r\n    setTimeout(() => {\r\n      this.setState(()=>({\r\n        task:false,\r\n        tips:''\r\n      }))\r\n      this.props.history.push('/message')\r\n    }, 1000);\r\n    \r\n  }\r\n  componentDidMount(){\r\n    this.props.changeHasbackAction();\r\n    this.props.changeTitle()\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state)=>({\r\n  hasBack:state.header.hasBack,\r\n  title:state.header.title,\r\n  proList:state.pro.proList\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch)=>({\r\n  changeStatus(value){\r\n    dispatch({\r\n      type:'changeStatus',\r\n      value\r\n    })\r\n  },\r\n  changeHasbackAction(){\r\n    dispatch({\r\n      type:'changeHasBack',\r\n      hasBack:true,\r\n    })\r\n  },\r\n  changeTitle(){\r\n    dispatch({\r\n      type:'changeTitle',\r\n      title:'启动项目'\r\n    })\r\n  }\r\n})\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(DealPro)","import React from 'react'\r\nimport './style.scss'\r\n\r\nconst Task =(props)=>(\r\n  <span className=\"task\">{props.tips}</span>\r\n)\r\n\r\nexport default Task"],"sourceRoot":""}